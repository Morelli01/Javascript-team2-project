{"mappings":"2MAAA,IAAAA,EAAAC,EAAA,S,0BAIA,MAAMC,EAAYC,SAASC,cAAc,sBAEnCC,EAAQF,SAASG,eAAe,SAChCC,EAAaJ,SAASC,cAAc,sBACpCI,EAAeL,SAASC,cAAc,8BACtCK,EAAgBN,SAASC,cAAc,eACvCM,EAAcP,SAASC,cAAc,iBACrCO,EAAWR,SAASC,cAAc,iBAGxCD,SAASS,iBAAiB,SAAS,SAAUC,GAC3C,GACEA,EAAEC,OAAOC,UAAUC,SAAS,cAC5BH,EAAEC,OAAOG,QAAQ,cACjB,EAQJ,SAAmBC,GACjB,MAAMC,EAAUD,EAASE,QAAQC,OAE3BC,EAAaC,IACjB,MAEMC,EAAM,GADI,wCACgBD,aAFjB,qCAIfvB,EAAAyB,QACGC,IAAIF,GACJG,MAAMC,IACL,MAAMC,EAAKD,EAASE,KAAKD,GACnBC,EAAOF,EAASE,KAChBC,EAAQD,EAAKC,MACbC,EAAYF,EAAKG,WACjBC,EAAcJ,EAAKK,aACnBC,EAAaN,EAAKM,WAClBC,EAAQP,EAAKQ,OAAO,GAAGC,KACvBC,EAAWV,EAAKU,SAEhBC,EAAY,kCADCX,EAAKY,YAGlBC,EAAYC,EAAAC,YAAYC,MAAMC,GAASA,EAAKlB,KAAOA,IACzD3B,EAAU8C,YAAcL,EACpB,yBACA,oBACJpC,EAAWyC,YAAcjB,EACzBpB,EAASS,QAAQS,GAAK,GAAGA,IACzBrB,EAAayC,UAAY,kNAIU,EAAAC,EAAAC,OAAMjB,EAAa,8GAEnBF,iOAKkB,EAAAkB,EAAAC,OACnDf,EACA,wMAKmDC,uCAIrD5B,EAAcuC,YAAcR,EAC5B9B,EAAY0C,aAAa,MAAOX,GAEhCpC,EAAMgD,MAAMC,QAAU,OACtBnD,SAASoD,KAAKxC,UAAUyC,IAAI,YAC5BrD,SAASS,iBAAiB,QAAS6C,GACnCtD,SAASS,iBAAiB,UAAW8C,EAAmB,IAEzDC,OAAOC,IACNC,QAAQD,MAAM,mCAAoCA,EAAM,GACxD,EAGAE,EAAa,KACjBzD,EAAMgD,MAAMC,QAAU,OACtBnD,SAASoD,KAAKxC,UAAUgD,OAAO,YAC/B1D,EAAM2D,oBAAoB,QAASP,GACnCtD,SAAS6D,oBAAoB,UAAWN,EAAmB,EAGzCrD,EAAMD,cAAc,oBAC5BQ,iBAAiB,QAASkD,GAEjBzD,EAAMD,cAAc,kBAC5BQ,iBAAiB,QAASkD,GAEvC,MAAML,EAAuBQ,IACvBA,EAAMnD,SAAWT,GACnByD,GAAY,EAIVJ,EAAsBO,IACR,WAAdA,EAAMC,KACRJ,GAAY,EAGhB5C,EAASN,iBAAiB,SAAS,KACjCU,EAAUH,EAAQ,G,CA5FlBgD,CAHiBtD,EAAEC,OAAOC,UAAUC,SAAS,aACzCH,EAAEC,OACFD,EAAEC,OAAOG,QAAQ,c,KAiGzBf,EAAUU,iBAAiB,QAASgC,EAAAwB,Y","sources":["src/javascript/modal-window.js"],"sourcesContent":["import axios from 'axios';\nimport { round } from './utils';\nimport { onClickFilm, favoriteArr } from './local_storage';\n\nconst addBtnLib = document.querySelector('.js_add_collection');\n\nconst modal = document.getElementById('modal');\nconst movieTitle = document.querySelector('.modal-title-movie');\nconst movieDetails = document.querySelector('.movie-details table tbody');\nconst movieOverview = document.querySelector('.about-text');\nconst moviePoster = document.querySelector('.modal-poster');\nconst movieDiv = document.querySelector('.more-details');\n\n\ndocument.addEventListener('click', function (e) {\n  if (\n    e.target.classList.contains('list_item') ||\n    e.target.closest('.list_item')\n  ) {\n    const listItem = e.target.classList.contains('list_item')\n      ? e.target\n      : e.target.closest('.list_item');\n    initModal(listItem);\n  }\n});\n\nfunction initModal(listItem) {\n  const movieId = listItem.dataset.filmId;\n\n  const openModal = (movieId) => {\n    const apiKey = '97fe01addf81f73693338979426ece1e';\n    const baseUrl = 'https://api.themoviedb.org/3';\n    const url = `${baseUrl}/movie/${movieId}?api_key=${apiKey}`;\n\n    axios\n      .get(url)\n      .then((response) => {\n        const id = response.data.id;\n        const data = response.data;\n        const title = data.title;\n        const voteCount = data.vote_count;\n        const voteAverage = data.vote_average;\n        const popularity = data.popularity;\n        const genre = data.genres[0].name;\n        const overview = data.overview;\n        const posterPath = data.poster_path;\n        const posterUrl = 'https://image.tmdb.org/t/p/w500' + posterPath;\n\n        const inStorage = favoriteArr.some((film) => film.id === id);\n        addBtnLib.textContent = inStorage\n          ? 'Remove from my library'\n          : 'Add to my library';\n        movieTitle.textContent = title;\n        movieDiv.dataset.id = `${id}`;\n        movieDetails.innerHTML = `\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Vote/Votes</span>\n            <span class='film-month_info-value'>\n              <span class='value-number'>${round(voteAverage, 10)}</span>\n              <span class='value-separator'>/</span>\n              <span class='value-number'>${voteCount}</span>\n            </span>\n          </div>\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Popularity</span>\n            <span class='film-month_info-value span-value'>${round(\n          popularity,\n          10\n        )}</span>\n          </div>\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Genre</span>\n            <span class='film-month_info-value span-value'>${genre}</span>\n          </div>\n        `;\n\n        movieOverview.textContent = overview;\n        moviePoster.setAttribute('src', posterUrl);\n\n        modal.style.display = 'flex';\n        document.body.classList.add('noScroll');\n        document.addEventListener('click', closeModalByOverlay);\n        document.addEventListener('keydown', closeModalByEscape);\n      })\n      .catch((error) => {\n        console.error('Error getting movie information:', error);\n      });\n  };\n\n  const closeModal = () => {\n    modal.style.display = 'none';\n    document.body.classList.remove('noScroll');\n    modal.removeEventListener('click', closeModalByOverlay);\n    document.removeEventListener('keydown', closeModalByEscape);\n  };\n\n  const closeButton = modal.querySelector('.modal-close-btn');\n  closeButton.addEventListener('click', closeModal);\n\n  const closeOverlay = modal.querySelector('.modal-overlay');\n  closeOverlay.addEventListener('click', closeModal);\n\n  const closeModalByOverlay = (event) => {\n    if (event.target === modal) {\n      closeModal();\n    }\n  };\n\n  const closeModalByEscape = (event) => {\n    if (event.key === 'Escape') {\n      closeModal();\n    }\n  };\n  listItem.addEventListener('click', () => {\n    openModal(movieId);\n  });\n}\n\naddBtnLib.addEventListener('click', onClickFilm);\n"],"names":["$2shzp","parcelRequire","$0f5d6d69e1536f57$var$addBtnLib","document","querySelector","$0f5d6d69e1536f57$var$modal","getElementById","$0f5d6d69e1536f57$var$movieTitle","$0f5d6d69e1536f57$var$movieDetails","$0f5d6d69e1536f57$var$movieOverview","$0f5d6d69e1536f57$var$moviePoster","$0f5d6d69e1536f57$var$movieDiv","addEventListener","e","target","classList","contains","closest","listItem","movieId1","dataset","filmId","openModal","movieId","url","default","get","then","response","id","data","title","voteCount","vote_count","voteAverage","vote_average","popularity","genre","genres","name","overview","posterUrl","poster_path","inStorage","$g7c2E","favoriteArr","some","film","textContent","innerHTML","$9Wu9X","round","setAttribute","style","display","body","add","closeModalByOverlay","closeModalByEscape","catch","error","console","closeModal","remove","removeEventListener","event","key","$0f5d6d69e1536f57$var$initModal","onClickFilm"],"version":3,"file":"modal-window.57fee1df.js.map"}