!function(){function t(t){return t&&t.__esModule?t.default:t}function e(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var n=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequired7c6;n.register("7OEV3",(function(e,r){var i=n("bpxeT"),a=n("2TvXO"),o=n("8LhE9"),s=n("krKMH"),c=n("3RRSf"),l=n("cLNaR"),u={ulEl:document.querySelector(".search_film_list"),inputEl:document.querySelector(".search_film_input"),divPagination:document.getElementById("pagination"),form:document.getElementById("form"),btnReset:document.querySelector(".btn_reset"),toTop:document.querySelector(".to_top"),falseResultMessage:document.querySelector(".cards__message")},d={},f=1,m="";function p(t){var e=t.map((function(t){var e=t.id,n=t.poster_path,r=t.original_title,i=t.genre_ids,a=t.release_date,o=t.vote_average,s=t.first_air_date,u=t.original_name,f=n?"https://image.tmdb.org/t/p/original".concat(n):"https://www.tgv.com.my/assets/images/404/movie-poster.jpg",m=function(t,e){return void 0!==t?t.split("-")[0]:void 0!==e?e.split("-")[0]:""}(a,s),p=function(t){var e=[];void 0!==t&&(e=t.filter((function(t){return void 0!==t})).map((function(t){return d[t]?d[t]:"Film"})));e.length>2&&(e=e.slice(0,2));return 0===e.length?"Film":e.join(", ")}(i),g=l.favoriteArr.some((function(t){return t.id===e}))?"Remove from my library":"Add to my library";return'<li class="search_film_img_wrap movie-image list_item" data-id=\''.concat(e,"'>\n        <img loga src=\"").concat(f,'" alt="').concat(u||r,'" width="395" height="574" class="search_film_img"/>\n        <div class="wrap">\n          <div class="search_film_wrap">\n            <p class="search_film_title">').concat(u||r,'</p>\n            <p class="search_film_genre">').concat(p," | ").concat(m,"</p> \n            <div class=\"stars\">\n            <div class='film_rating-wrapper'>\n              <div class='film_rating' style='--rating: ").concat(o/2,";' aria-label='Rating of this film is ").concat((0,c.round)(o/2,10),' out of 5.\'></div>\n            </div>\n         </div>\n          </div>\n          <button type="button" class="js_add_collection" data-id="').concat(e,'">').concat(g,"</button>\n        </div>\n      </li>")})).join("");u.ulEl.innerHTML=e}function g(){return(g=t(i)(t(a).mark((function e(n){var r;return t(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),f=1,m=n.currentTarget.elements.film_name.value.trim(),u.divPagination.classList.add("display-hidden"),u.falseResultMessage.classList.add("display-hidden"),m.length>=1&&u.btnReset.classList.remove("is-hidden"),t.next=8,(0,o.getCategoriesQuery)(m,f);case 8:r=t.sent,u.ulEl.innerHTML="",p(r.results),v(r),h(r);case 13:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function v(t){t.total_results>20&&(u.divPagination.classList.remove("display-hidden"),(0,s.createPagination)(t.total_results,t.total_pages).on("afterMove",(function(t){f=t.page,(0,o.getCategoriesQuery)(m,f).then((function(t){p(t.results),window.scrollTo({top:450,behavior:"smooth"})})).catch((function(t){console.error("Error:",t)}))})))}function h(t){0===t.total_results&&u.falseResultMessage.classList.remove("display-hidden")}(0,o.getGenres)().then((function(t){return t.forEach((function(t){var e=t.id,n=t.name;d[e]=n})),(0,o.getFilms)(f)})).then((function(t){p(t.results),function(t){if(t.total_results>20){u.divPagination.classList.remove("display-hidden"),(0,s.createPagination)(t.total_results,t.total_pages).on("afterMove",(function(t){f=t.page,(0,o.getFilms)(f).then((function(t){p(t.results),window.scrollTo({top:450,behavior:"smooth"})})).catch((function(t){console.error("Error:",t)}))}))}}(t)})).catch((function(t){console.log(t)})),u.ulEl.addEventListener("click",l.onClickFilm),u.form.addEventListener("submit",(function(t){return g.apply(this,arguments)})),u.btnReset.addEventListener("click",(function(){u.btnReset.classList.add("is-hidden"),u.form.reset()}))})),n.register("3RRSf",(function(t,n){function r(t,e){return Math.round(t*e)/e}e(t.exports,"round",(function(){return r})),e(t.exports,"getRandomNumber",(function(){return i})),e(t.exports,"renderStars",(function(){return a}));var i=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};function a(t,e){return t.innerHTML='\n    <div class="film_rating" style="--rating:'.concat(e/2,';" aria-label="Rating of this film is ').concat(Math.round(e/2),' out of 5."></div>\n')}})),n.register("cLNaR",(function(r,i){e(r.exports,"favoriteArr",(function(){return u})),e(r.exports,"onClickFilm",(function(){return d}));var a,o=n("bpxeT"),s=n("2TvXO"),c=n("8LhE9"),l="favorite",u=null!==(a=JSON.parse(localStorage.getItem(l)))&&void 0!==a?a:[];function d(t){return f.apply(this,arguments)}function f(){return(f=t(o)(t(s).mark((function e(n){var r,i,a,o;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,!(i=n.target.closest(".js_add_collection"))){t.next=19;break}return a=i.closest("li").dataset.id,t.next=6,m(Number(a));case 6:if(!(r=t.sent)){t.next=19;break}if(!u.some((function(t){return t.id===r}))){t.next=13;break}u.splice(u.findIndex((function(t){return t.id===r})),1),localStorage.setItem(l,JSON.stringify(u)),i.textContent="Add to my library",t.next=19;break;case 13:return t.next=15,(0,c.getCategoriesId)(r);case 15:o=t.sent,u.push(o),localStorage.setItem(l,JSON.stringify(u)),i.textContent="Remove from my library";case 19:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function m(t){return p.apply(this,arguments)}function p(){return(p=t(o)(t(s).mark((function e(n){var r;return t(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.getCategoriesId)(n);case 2:return r=t.sent,t.abrupt("return",r.id===n?r.id:null);case 4:case"end":return t.stop()}}),e)})))).apply(this,arguments)}}))}();
//# sourceMappingURL=film-catalog.89b94b93.js.map
