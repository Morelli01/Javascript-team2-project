{"mappings":"uNAAA,IAAAA,EAAAC,EAAA,S,0BAIMC,EAAYC,SAASC,cAAc,sBAEnCC,EAAQF,SAASG,eAAe,SAChCC,EAAaJ,SAASC,cAAc,sBACpCI,EAAeL,SAASC,cAAc,8BACtCK,EAAgBN,SAASC,cAAc,eACvCM,EAAcP,SAASC,cAAc,iBACrCO,EAAWR,SAASC,cAAc,iBAGxCD,SAASS,iBAAiB,SAAS,SAAUC,IAEzCA,EAAEC,OAAOC,UAAUC,SAAS,cAC5BH,EAAEC,OAAOG,QAAQ,gBASrB,SAAmBC,GACjB,IAAMC,EAAUD,EAASE,QAAQC,OAE3BC,EAAY,SAACC,GACjB,IAAMC,EAAS,mCAETC,EAAM,GAAoBC,OADhB,+BACO,WAA4BA,OAAnBH,EAAQ,aAAkBG,OAAPF,GAEnDxB,EAAA2B,QACGC,IAAIH,GACJI,MAAK,SAACC,GACL,IAAMC,EAAKD,EAASE,KAAKD,GACnBC,EAAOF,EAASE,KAChBC,EAAQD,EAAKC,MACbC,EAAYF,EAAKG,WACjBC,EAAcJ,EAAKK,aACnBC,EAAaN,EAAKM,WAClBC,EAAQP,EAAKQ,OAAO,GAAGC,KACvBC,EAAWV,EAAKU,SAEhBC,EAAY,kCADCX,EAAKY,YAGlBC,EAAYC,EAAAC,YAAYC,MAAK,SAACC,G,OAASA,EAAKlB,KAAOA,C,IACzD7B,EAAUgD,YAAcL,EACpB,yBACA,oBACJtC,EAAW2C,YAAcjB,EACzBtB,EAASS,QAAQW,GAAK,GAAML,OAAHK,GACzBvB,EAAa2C,UAAY,iNAMUzB,QAFA,EAAA0B,EAAAC,OAAMjB,EAAa,IAAI,4GAOLV,OALlBQ,EAAU,gOAYQR,QAPA,EAAA0B,EAAAC,OACnDf,EACA,IACA,sMAIyDZ,OAANa,EAAM,uCAI3D9B,EAAcyC,YAAcR,EAC5BhC,EAAY4C,aAAa,MAAOX,GAEhCtC,EAAMkD,MAAMC,QAAU,OACtBrD,SAASsD,KAAK1C,UAAU2C,IAAI,YAC5BvD,SAASS,iBAAiB,QAAS+C,GACnCxD,SAASS,iBAAiB,UAAWgD,E,IAEtCC,OAAM,SAACC,GACNC,QAAQD,MAAM,mCAAoCA,E,KAIlDE,EAAa,WACjB3D,EAAMkD,MAAMC,QAAU,OACtBrD,SAASsD,KAAK1C,UAAUkD,OAAO,YAC/B5D,EAAM6D,oBAAoB,QAASP,GACnCxD,SAAS+D,oBAAoB,UAAWN,E,EAGtBvD,EAAMD,cAAc,oBAC5BQ,iBAAiB,QAASoD,GAEjB3D,EAAMD,cAAc,kBAC5BQ,iBAAiB,QAASoD,GAEvC,IAAML,EAAsB,SAACQ,GACvBA,EAAMrD,SAAWT,GACnB2D,G,EAIEJ,EAAqB,SAACO,GACR,WAAdA,EAAMC,KACRJ,G,EAGJ9C,EAASN,iBAAiB,SAAS,WACjCU,EAAUH,E,IA5FVkD,CAHiBxD,EAAEC,OAAOC,UAAUC,SAAS,aACzCH,EAAEC,OACFD,EAAEC,OAAOG,QAAQ,c,IAiGzBf,EAAUU,iBAAiB,QAASkC,EAAAwB,Y","sources":["src/javascript/modal-window.js"],"sourcesContent":["import axios from 'axios';\nimport { round } from './utils';\nimport { onClickFilm, favoriteArr } from './local_storage';\n\nconst addBtnLib = document.querySelector('.js_add_collection');\n\nconst modal = document.getElementById('modal');\nconst movieTitle = document.querySelector('.modal-title-movie');\nconst movieDetails = document.querySelector('.movie-details table tbody');\nconst movieOverview = document.querySelector('.about-text');\nconst moviePoster = document.querySelector('.modal-poster');\nconst movieDiv = document.querySelector('.more-details');\n\n\ndocument.addEventListener('click', function (e) {\n  if (\n    e.target.classList.contains('list_item') ||\n    e.target.closest('.list_item')\n  ) {\n    const listItem = e.target.classList.contains('list_item')\n      ? e.target\n      : e.target.closest('.list_item');\n    initModal(listItem);\n  }\n});\n\nfunction initModal(listItem) {\n  const movieId = listItem.dataset.filmId;\n\n  const openModal = (movieId) => {\n    const apiKey = '97fe01addf81f73693338979426ece1e';\n    const baseUrl = 'https://api.themoviedb.org/3';\n    const url = `${baseUrl}/movie/${movieId}?api_key=${apiKey}`;\n\n    axios\n      .get(url)\n      .then((response) => {\n        const id = response.data.id;\n        const data = response.data;\n        const title = data.title;\n        const voteCount = data.vote_count;\n        const voteAverage = data.vote_average;\n        const popularity = data.popularity;\n        const genre = data.genres[0].name;\n        const overview = data.overview;\n        const posterPath = data.poster_path;\n        const posterUrl = 'https://image.tmdb.org/t/p/w500' + posterPath;\n\n        const inStorage = favoriteArr.some((film) => film.id === id);\n        addBtnLib.textContent = inStorage\n          ? 'Remove from my library'\n          : 'Add to my library';\n        movieTitle.textContent = title;\n        movieDiv.dataset.id = `${id}`;\n        movieDetails.innerHTML = `\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Vote/Votes</span>\n            <span class='film-month_info-value'>\n              <span class='value-number'>${round(voteAverage, 10)}</span>\n              <span class='value-separator'>/</span>\n              <span class='value-number'>${voteCount}</span>\n            </span>\n          </div>\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Popularity</span>\n            <span class='film-month_info-value span-value'>${round(\n          popularity,\n          10\n        )}</span>\n          </div>\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Genre</span>\n            <span class='film-month_info-value span-value'>${genre}</span>\n          </div>\n        `;\n\n        movieOverview.textContent = overview;\n        moviePoster.setAttribute('src', posterUrl);\n\n        modal.style.display = 'flex';\n        document.body.classList.add('noScroll');\n        document.addEventListener('click', closeModalByOverlay);\n        document.addEventListener('keydown', closeModalByEscape);\n      })\n      .catch((error) => {\n        console.error('Error getting movie information:', error);\n      });\n  };\n\n  const closeModal = () => {\n    modal.style.display = 'none';\n    document.body.classList.remove('noScroll');\n    modal.removeEventListener('click', closeModalByOverlay);\n    document.removeEventListener('keydown', closeModalByEscape);\n  };\n\n  const closeButton = modal.querySelector('.modal-close-btn');\n  closeButton.addEventListener('click', closeModal);\n\n  const closeOverlay = modal.querySelector('.modal-overlay');\n  closeOverlay.addEventListener('click', closeModal);\n\n  const closeModalByOverlay = (event) => {\n    if (event.target === modal) {\n      closeModal();\n    }\n  };\n\n  const closeModalByEscape = (event) => {\n    if (event.key === 'Escape') {\n      closeModal();\n    }\n  };\n  listItem.addEventListener('click', () => {\n    openModal(movieId);\n  });\n}\n\naddBtnLib.addEventListener('click', onClickFilm);\n"],"names":["$dIxxU","parcelRequire","$739b8b6fcdcbfb13$var$addBtnLib","document","querySelector","$739b8b6fcdcbfb13$var$modal","getElementById","$739b8b6fcdcbfb13$var$movieTitle","$739b8b6fcdcbfb13$var$movieDetails","$739b8b6fcdcbfb13$var$movieOverview","$739b8b6fcdcbfb13$var$moviePoster","$739b8b6fcdcbfb13$var$movieDiv","addEventListener","e","target","classList","contains","closest","listItem","movieId1","dataset","filmId","openModal","movieId","apiKey","url","concat","default","get","then","response","id","data","title","voteCount","vote_count","voteAverage","vote_average","popularity","genre","genres","name","overview","posterUrl","poster_path","inStorage","$cLNaR","favoriteArr","some","film","textContent","innerHTML","$3RRSf","round","setAttribute","style","display","body","add","closeModalByOverlay","closeModalByEscape","catch","error","console","closeModal","remove","removeEventListener","event","key","$739b8b6fcdcbfb13$var$initModal","onClickFilm"],"version":3,"file":"modal-window.12c6fb86.js.map"}