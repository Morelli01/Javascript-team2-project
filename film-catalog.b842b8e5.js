function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequired7c6;t.register("lklxg",(function(e,i){var n=t("dK6vY"),s=t("3u1GM"),o=t("9Wu9X"),r=t("g7c2E");const a={ulEl:document.querySelector(".search_film_list"),inputEl:document.querySelector(".search_film_input"),divPagination:document.getElementById("pagination"),form:document.getElementById("form"),btnReset:document.querySelector(".btn_reset"),toTop:document.querySelector(".to_top"),falseResultMessage:document.querySelector(".cards__message")};let l={},d=1,c="";function u(e){const t=e.map((({id:e,poster_path:t,original_title:i,genre_ids:n,release_date:s,vote_average:a,first_air_date:d,original_name:c})=>{let u=t?`https://image.tmdb.org/t/p/original${t}`:"https://www.tgv.com.my/assets/images/404/movie-poster.jpg";const f=function(e,t){return void 0!==e?e.split("-")[0]:void 0!==t?t.split("-")[0]:""}(s,d);let g=function(e){let t=[];void 0!==e&&(t=e.filter((e=>void 0!==e)).map((e=>l[e]?l[e]:"Film")));t.length>2&&(t=t.slice(0,2));return 0===t.length?"Film":t.join(", ")}(n);const m=r.favoriteArr.some((t=>t.id===e))?"Remove from my library":"Add to my library";return`<li class="search_film_img_wrap movie-image list_item" data-id='${e}'>\n        <img loga src="${u}" alt="${c||i}" width="395" height="574" class="search_film_img"/>\n        <div class="wrap">\n          <div class="search_film_wrap">\n            <p class="search_film_title">${c||i}</p>\n            <p class="search_film_genre">${g} | ${f}</p> \n            <div class="stars">\n            <div class='film_rating-wrapper'>\n              <div class='film_rating' style='--rating: ${a/2};' aria-label='Rating of this film is ${(0,o.round)(a/2,10)} out of 5.'></div>\n            </div>\n         </div>\n          </div>\n          <button type="button" class="js_add_collection" data-id="${e}">${m}</button>\n        </div>\n      </li>`})).join("");a.ulEl.innerHTML=t}(0,n.getGenres)().then((e=>(e.forEach((({id:e,name:t})=>{l[e]=t})),(0,n.getFilms)(d)))).then((e=>{u(e.results),function(e){if(e.total_results>20){a.divPagination.classList.remove("display-hidden");(0,s.createPagination)(e.total_results,e.total_pages).on("afterMove",(e=>{d=e.page,(0,n.getFilms)(d).then((e=>{u(e.results),window.scrollTo({top:450,behavior:"smooth"})})).catch((e=>{console.error("Error:",e)}))}))}}(e)})).catch((function(e){console.log(e)})),a.ulEl.addEventListener("click",r.onClickFilm),a.form.addEventListener("submit",(async function(e){e.preventDefault(),d=1,c=e.currentTarget.elements.film_name.value.trim(),a.divPagination.classList.add("display-hidden"),a.falseResultMessage.classList.add("display-hidden"),c.length>=1&&a.btnReset.classList.remove("is-hidden");const t=await(0,n.getCategoriesQuery)(c,d);a.ulEl.innerHTML="",u(t.results),function(e){if(e.total_results>20){a.divPagination.classList.remove("display-hidden");(0,s.createPagination)(e.total_results,e.total_pages).on("afterMove",(e=>{d=e.page,(0,n.getCategoriesQuery)(c,d).then((e=>{u(e.results),window.scrollTo({top:450,behavior:"smooth"})})).catch((e=>{console.error("Error:",e)}))}))}}(t),function(e){0===e.total_results&&a.falseResultMessage.classList.remove("display-hidden")}(t)})),a.btnReset.addEventListener("click",(()=>{a.btnReset.classList.add("is-hidden"),a.form.reset()}))})),t.register("9Wu9X",(function(t,i){function n(e,t){return Math.round(e*t)/t}e(t.exports,"round",(function(){return n})),e(t.exports,"getRandomNumber",(function(){return s})),e(t.exports,"renderStars",(function(){return o}));const s=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function o(e,t){return e.innerHTML=`\n    <div class="film_rating" style="--rating:${t/2};" aria-label="Rating of this film is ${Math.round(t/2)} out of 5."></div>\n`}})),t.register("g7c2E",(function(i,n){e(i.exports,"favoriteArr",(function(){return r})),e(i.exports,"onClickFilm",(function(){return a}));var s=t("dK6vY");const o="favorite",r=JSON.parse(localStorage.getItem(o))??[];async function a(e){let t=null;const i=e.target.closest(".js_add_collection");if(i){const{id:e}=i.closest("li").dataset;if(t=await async function(e){const t=await(0,s.getCategoriesId)(e);return t.id===e?t.id:null}(Number(e)),t){if(r.some((({id:e})=>e===t)))r.splice(r.findIndex((e=>e.id===t)),1),localStorage.setItem(o,JSON.stringify(r)),i.textContent="Add to my library";else{const e=await(0,s.getCategoriesId)(t);r.push(e),localStorage.setItem(o,JSON.stringify(r)),i.textContent="Remove from my library"}}}}}));
//# sourceMappingURL=film-catalog.b842b8e5.js.map
