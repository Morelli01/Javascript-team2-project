{"mappings":"wQAAA,IAAAA,EAAAC,EAAA,S,uCAGCC,EAAAF,EAAA,CAAAE,EAAAC,GAAAC,MAAA,SAAAC,I,IAGOC,EAEAC,EAEAC,EACFC,EAMGC,EAAAC,EAAAC,EAHCC,EAGDC,EAAAC,EAAMC,E,sEAbb,EAAAC,EAAAC,gBACiC,MAA7BC,OAAOC,SAASC,UAAiD,gBAA7BF,OAAOC,SAASC,SAA0B,C,iEAC9D,EAAAC,EAAAC,UAAS,G,cAAvBjB,EAAKkB,EAAAC,KAELlB,EAAWD,EAAMoB,QAAQC,MAAM,EAAG,G,UAEnB,EAAAL,EAAAM,a,UAAfpB,EAAMgB,EAAAC,KACRhB,EAAe,GAMZC,GAAU,EAAVC,GAAU,EAAVC,OAAUiB,IAJbV,OAAOW,YAAc,KAAG,C,uBACpBjB,EAAON,EAAS,G,UACDwB,EAAiBlB,EAAML,G,QAA5CC,EAAYe,EAAAC,K,kCAEPX,EAAcP,EAAQyB,OAAAC,Y,WAAtBvB,GAAAK,EAAAD,EAAUoB,QAAAC,KAAA,C,uBAAJnB,EAAND,EAAUqB,M,KACb3B,E,UAAsBsB,EAAiBf,EAAMR,G,QAA7CC,EAAYe,EAAAa,IAAAb,EAAAC,K,QADTf,GAAU,E,2EAAVC,GAAU,EAAVC,EAAUY,EAAAc,G,4BAAV5B,GAAU,MAAVI,EAAUyB,QAAVzB,EAAUyB,S,sBAAV5B,EAAU,C,sBAAVC,E,iEAIP,EAAAK,EAAAuB,eACAC,SAASC,cAAc,uBAAuBC,UAAYlC,E,4EAnB3D,GAuBD,I,EAAMsB,G,EAAmB7B,EAAAF,EAAA,CAAAE,EAAAC,GAAAC,MAAA,SAAAC,EAAOQ,EAAML,G,IAE9BoC,EACAC,EACAC,EACAC,EAEAC,E,yEALAJ,EADU,kDACW/B,EAAKoC,cAC1BJ,EAAQhC,EAAKqC,eACbJ,EAAcjC,EAAKsC,aAAaC,MAAM,KAAK,GAC3CL,EAAclC,EAAKwC,aAEnBL,EAAaxC,EAChB8C,QAAO,SAACC,G,OAAU1C,EAAK2C,UAAU7B,MAAM,EAAG,GAAG8B,SAASF,EAAMG,G,IAC5DC,KAAI,SAAAC,G,OAAOA,EAAJC,I,IACPC,KAAK,M,kBAED,qDAC+BC,OADsBlD,EAAK6C,GAAG,8CAIjCK,OAHGnB,EAAS,sIAKNmB,OAFNlB,EAAM,gGAE+CkB,OAA/Cf,EAAW,sCAEIe,OAFgCjB,EAAY,oHAE5BiB,OAAhBhB,EAAc,EAAE,8I,oDApB1ClC,EAAML,G,iCA6BhCwD,EAAavB,SAASC,cAAc,oBACtCsB,GACFA,EAAWC,iBAAiB,SAAS,WACnC9C,OAAOC,SAAS8C,KAAO,6D","sources":["src/javascript/trends.js"],"sourcesContent":["import { getFilms, getGenres } from './api';\nimport { spinnerStart, spinnerStop } from './spin';\n\n(async () => {\n  spinnerStart()\n  if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') return;\n  const films = await getFilms(1);\n\n  const topThree = films.results.slice(0, 3);\n\n  const genres = await getGenres();\n  let resultMarkup = '';\n\n  if (window.innerWidth <= 768) {\n    const film = topThree[0];\n    resultMarkup = await createItemMarkup(film, genres);\n  } else {\n    for (const film of topThree) {\n      resultMarkup += await createItemMarkup(film, genres);\n    }\n  }\n  spinnerStop()\n  document.querySelector('.weekly_trends_list').innerHTML = resultMarkup;\n\n})();\n\nconst createItemMarkup = async (film, genres) => {\n  const baseUrl = 'https://image.tmdb.org/t/p/w600_and_h900_bestv2';\n  const imageSrc = baseUrl + film.backdrop_path;\n  const title = film.original_title;\n  const releaseYear = film.release_date.split('-')[0];\n  const voteAverage = film.vote_average;\n\n  const filmGenres = genres\n    .filter((genre) => film.genre_ids.slice(0, 2).includes(genre.id))\n    .map(({ name }) => name)\n    .join(', ');\n\n  return `<li class='weekly_trends_list_item' data-film-id='${film.id}'>\n        <img class='movie-image' src='${imageSrc}' alt=''>\n        <div class='weekly-trends_description'>\n          <div class='flex-wrap'>\n            <h4 class='film_title'>${title}</h4>\n            <div class='flex-wrap-rating'>\n            <h5 class='film_description'>${filmGenres}<span class='separator'> | </span>${releaseYear}</h5>\n            <div class='film_rating-wrapper'>\n              <div class=\"film_rating\" style=\"--rating: ${voteAverage / 2};\" aria-label=\"Rating of this product is 2.3 out of 5.\"></div>\n            </div></div>\n\n          </div>\n        </div>\n      </li>`;\n};\n\n\nconst seeAllLink = document.querySelector('.link_to_catalog');\nif (seeAllLink) {\n  seeAllLink.addEventListener('click', () => {\n    window.location.href = 'https://www.themoviedb.org/movie/603692-john-wick-chapter-4';\n  });\n}"],"names":["$bpxeT","parcelRequire","$parcel$interopDefault","$2TvXO","mark","_callee","films","topThree","genres","resultMarkup","_iteratorNormalCompletion","_didIteratorError","_iteratorError","film","_iterator","_step","film1","$dBKQr","spinnerStart","window","location","pathname","$8LhE9","getFilms","_ctx","sent","results","slice","getGenres","undefined","innerWidth","$e444f4c5cdaffc6a$var$createItemMarkup","Symbol","iterator","next","done","value","t0","t1","return","spinnerStop","document","querySelector","innerHTML","imageSrc","title","releaseYear","voteAverage","filmGenres","backdrop_path","original_title","release_date","split","vote_average","filter","genre","genre_ids","includes","id","map","param","name","join","concat","$e444f4c5cdaffc6a$var$seeAllLink","addEventListener","href"],"version":3,"file":"trends.5540b328.js.map"}