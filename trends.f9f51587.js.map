{"mappings":"sSAAA,IAAAA,EAAAC,EAAA,S,0BAIC,WACC,MAAMC,EAAeC,SAASC,cAAc,uBAC5C,IAAKF,EAAc,QAEnB,EAAAG,EAAAC,gBACA,MAEMC,SAFc,EAAAP,EAAAQ,UAAS,IAENC,QAAQC,MAAM,EAAG,GAElCC,QAAe,EAAAX,EAAAY,aACrB,IAAIC,EAAe,GAEnB,GAAIC,OAAOC,YAAc,IAAK,CAC5B,MAAMC,EAAOT,EAAS,GACtBM,QAAqBI,EAAiBD,EAAML,E,MAE5C,IAAK,MAAMK,KAAQT,EACjBM,SAAsBI,EAAiBD,EAAML,GAGjDT,EAAagB,UAAYL,GAEzB,EAAAR,EAAAc,cACD,EAvBA,GAyBD,MAAMF,EAAmBG,MAAOJ,EAAML,KACpC,MACMU,EADU,kDACWL,EAAKM,cAC1BC,EAAQP,EAAKQ,eACbC,EAAcT,EAAKU,aAAaC,MAAM,KAAK,GAC3CC,EAAcZ,EAAKa,aACnBC,EAAMd,EAAKO,MAEXQ,EAAapB,EAChBqB,QAAQC,GAAUjB,EAAKkB,UAAUxB,MAAM,EAAG,GAAGyB,SAASF,EAAMG,MAC5DC,KAAI,EAACC,KAAEA,KAAWA,IAClBC,KAAK,MAER,MAAO,+DAA+DvB,EAAKoB,+CACrCf,WAAkBS,+HAGrBP,gGAEMQ,oCAA6CN,kHAE9BG,EAAc,2CAA0C,EAAAY,EAAAC,OAAOb,EAAc,EAAI,8GAM/H,EAINc,EAAavC,SAASC,cAAc,oBACtCsC,GACFA,EAAWC,iBAAiB,SAAS,KACnC7B,OAAO8B,SAASC,KAAO,6DAA6D,G,sCC/DxF,SAASC,EAAMC,EAAQC,GACrB,OAAOC,KAAKR,MAAMM,EAASC,GAAUA,C,qJAGvC,MAAME,EAAkB,CAACC,EAAKC,IACrBH,KAAKI,MAAMJ,KAAKK,UAAYF,EAAMD,EAAM,IAAMA,EAGvD,SAASI,EAAYC,EAASC,GAC5B,OAAQD,EAAQtC,UAAY,kDAExBuC,EAAS,0CAC8BR,KAAKR,MAC9CgB,EAAS,wB","sources":["src/javascript/trends.js","src/javascript/utils.js"],"sourcesContent":["import { getFilms, getGenres } from './api';\nimport { spinnerStart, spinnerStop } from './spin';\nimport { round } from './utils';\n\n(async () => {\n  const weeklyTrends = document.querySelector('.weekly_trends_list');\n  if (!weeklyTrends) return;\n\n  spinnerStart();\n  const films = await getFilms(1);\n\n  const topThree = films.results.slice(0, 3);\n\n  const genres = await getGenres();\n  let resultMarkup = '';\n\n  if (window.innerWidth <= 768) {\n    const film = topThree[0];\n    resultMarkup = await createItemMarkup(film, genres);\n  } else {\n    for (const film of topThree) {\n      resultMarkup += await createItemMarkup(film, genres);\n    }\n  }\n  weeklyTrends.innerHTML = resultMarkup;\n\n  spinnerStop();\n})();\n\nconst createItemMarkup = async (film, genres) => {\n  const baseUrl = 'https://image.tmdb.org/t/p/w600_and_h900_bestv2';\n  const imageSrc = baseUrl + film.backdrop_path;\n  const title = film.original_title;\n  const releaseYear = film.release_date.split('-')[0];\n  const voteAverage = film.vote_average;\n  const alt = film.title;\n\n  const filmGenres = genres\n    .filter((genre) => film.genre_ids.slice(0, 2).includes(genre.id))\n    .map(({ name }) => name)\n    .join(', ');\n\n  return `<li class='weekly_trends_list_item list_item' data-film-id='${film.id}'>\n        <img class='movie-image' src='${imageSrc}' alt='${alt}'>\n        <div class='weekly-trends_description'>\n          <div class='flex-wrap'>\n            <h4 class='film_title'>${title}</h4>\n            <div class='flex-wrap-rating'>\n            <h5 class='film_description'>${filmGenres}<span class='separator'>|</span>${releaseYear}</h5>\n            <div class='film_rating-wrapper'>\n              <div class='film_rating' style='--rating: ${voteAverage / 2};' aria-label='Rating of this film is ${round((voteAverage / 2), 10)} out of 5.'></div>\n            </div>\n          </div>\n\n          </div>\n        </div>\n      </li>`;\n};\n\n\nconst seeAllLink = document.querySelector('.link_to_catalog');\nif (seeAllLink) {\n  seeAllLink.addEventListener('click', () => {\n    window.location.href = 'https://www.themoviedb.org/movie/603692-john-wick-chapter-4';\n  });\n}","function round(number, digits) {\n  return Math.round(number * digits) / digits;\n}\n\nconst getRandomNumber = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nfunction renderStars(element, rating) {\n  return (element.innerHTML = `\n    <div class=\"film_rating\" style=\"--rating:${\n      rating / 2\n    };\" aria-label=\"Rating of this film is ${Math.round(\n    rating / 2\n  )} out of 5.\"></div>\n`);\n}\n\nexport { round, getRandomNumber, renderStars };\n"],"names":["$dK6vY","parcelRequire","weeklyTrends","document","querySelector","$dpMC2","spinnerStart","topThree","getFilms","results","slice","genres","getGenres","resultMarkup","window","innerWidth","film","$34f48d4946fd003e$var$createItemMarkup","innerHTML","spinnerStop","async","imageSrc","backdrop_path","title","original_title","releaseYear","release_date","split","voteAverage","vote_average","alt","filmGenres","filter","genre","genre_ids","includes","id","map","name","join","$9Wu9X","round","$34f48d4946fd003e$var$seeAllLink","addEventListener","location","href","$73d0ece61bfba828$export$2077e0241d6afd3c","number","digits","Math","$73d0ece61bfba828$export$eab19c48dcb6310d","min","max","floor","random","$73d0ece61bfba828$export$6b958f153b36132a","element","rating"],"version":3,"file":"trends.f9f51587.js.map"}