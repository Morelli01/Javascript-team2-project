{"mappings":"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","sources":["src/javascript/hero.js"],"sourcesContent":["import axios from 'axios';\nimport { renderStars, getRandomNumber } from './utils';\nimport { onClickFilm, favoriteArr } from './local_storage';\nimport { async } from '@vimeo/player';\n\n// test\n// YUOTUBE_PLAYER====================================\nlet player;\n\nfunction onYouTubeIframeAPIReady(id) {\n  player = new YT.Player('trailer-video', {\n    height: '240',\n    width: '320',\n    videoId: `${id}`,\n  });\n}\n\n// DOM ELEMENTS================================================\nconst heroSection = document.querySelector('.hero');\nconst heroTitle = document.querySelector('.hero-title');\nconst heroText = document.querySelector('.hero-text');\nconst heroTrailerBTN = document.querySelector('.hero-getstarted-btn');\nconst heroMoreBTN = document.querySelector('.hero-moredetails-btn');\nconst heroRating = document.querySelector('.rating-box');\nconst trailerModal = document.querySelector('.trailer-modal');\nconst closeModal = document.querySelector('.trailer-svg-close');\nconst heroMoreDeteils = document.querySelector('.hero-more-deteils');\nconst heroMoreDeteils_BTN = document.querySelector('.hero-moredetails-btn');\nconst modalOverlay = document.querySelector('.modal-overlay');\n\n// =============================================================\nlet screenWidth = document.documentElement.clientWidth;\n\n// SLICE HERO TEXT =======================================\nif (screenWidth < 768) {\n  heroText.textContent = heroText.textContent.slice(0, 120);\n}\nif (screenWidth >= 768) {\n  heroText.textContent = heroText.textContent.slice(0);\n}\n\n// EVENT FUNCTION=====================================\n\nfunction handleKeyDown(event) {\n  if (event.key === 'Escape') {\n    trailerModal.classList.add('ishidden');\n    heroTrailerBTN.classList.remove('blocked-element');\n\n    heroMoreDeteils.classList.add('ishidden');\n    heroMoreDeteils_BTN.classList.remove('blocked-element');\n    modalOverlay.classList.add('ishidden');\n    document.body.classList.remove('noScroll');\n\n    document.removeEventListener('keydown', handleKeyDown);\n    if (closeModal.classList.contains('inother-position')) {\n      player.pauseVideo();\n    }\n  }\n}\n\nfunction onCloseTouchBody(event) {\n  if (\n    event.target.classList.contains('hero-wrapper-btn') ||\n    event.target.classList.contains('hero-getstarted-btn')\n  ) {\n    return;\n  }\n  if (!trailerModal.contains(event.target)) {\n    trailerModal.classList.add('ishidden');\n\n    heroTrailerBTN.classList.remove('blocked-element');\n    heroMoreDeteils_BTN.classList.remove('blocked-element');\n\n    document.removeEventListener('click', onCloseTouchBody);\n    document.removeEventListener('keydown', handleKeyDown);\n  }\n}\n\nfunction onOpenDetails() {\n  heroMoreDeteils.classList.remove('ishidden');\n  modalOverlay.classList.remove('ishidden');\n\n  heroMoreDeteils_BTN.classList.add('blocked-element');\n  heroTrailerBTN.classList.add('blocked-element');\n\n  document.body.classList.add('noScroll');\n  document.addEventListener('keydown', handleKeyDown);\n  document.addEventListener('click', onCloseBackdrop);\n}\n\nfunction onCloseBackdrop(e) {\n  if (\n    e.target.classList.contains('hero-wrapper-btn') ||\n    e.target.classList.contains('hero-moredetails-btn')\n  ) {\n    return;\n  }\n  if (e.target === modalOverlay) {\n    heroMoreDeteils.classList.add('ishidden');\n    modalOverlay.classList.add('ishidden');\n\n    heroMoreDeteils_BTN.classList.remove('blocked-element');\n    heroTrailerBTN.classList.remove('blocked-element');\n\n    document.body.classList.remove('noScroll');\n    document.removeEventListener('keydown', handleKeyDown);\n    document.removeEventListener('click', onCloseBackdrop);\n  }\n}\n\nfunction onCloseDetails() {\n  heroMoreDeteils.classList.add('ishidden');\n  modalOverlay.classList.add('ishidden');\n\n  heroMoreDeteils_BTN.classList.remove('blocked-element');\n  heroTrailerBTN.classList.remove('blocked-element');\n\n  document.body.classList.remove('noScroll');\n  document.removeEventListener('keydown', handleKeyDown);\n  document.removeEventListener('click', onCloseBackdrop);\n}\n\nfunction onOpenModalTrailer(e) {\n  e.preventDefault();\n\n  heroMoreDeteils_BTN.classList.add('blocked-element');\n  heroTrailerBTN.classList.add('blocked-element');\n\n  trailerModal.classList.remove('ishidden');\n\n  document.addEventListener('keydown', handleKeyDown);\n  document.addEventListener('click', onCloseTouchBody);\n}\n\nfunction onCloseModalTrailer() {\n  trailerModal.classList.add('ishidden');\n\n  heroMoreDeteils_BTN.classList.remove('blocked-element');\n  heroTrailerBTN.classList.remove('blocked-element');\n\n  document.removeEventListener('keydown', handleKeyDown);\n\n  if (closeModal.classList.contains('inother-position')) {\n    player.pauseVideo();\n  }\n}\n\n//TRAILER_VIDEO  ASYNC FUNCTION===========================================================\nasync function trailer(id) {\n  const options = {\n    method: 'GET',\n    url: `https://api.themoviedb.org/3/movie/${id}/videos`,\n    params: { language: 'en-US' },\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwZmE1ZDU3ODY5YzBmYzQ2YWI2YjI3MDJhZDllNjZmZSIsInN1YiI6IjY0NzhjNTUwMGUyOWEyMDExNmFiOGIwNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.6ciIvtOhfPeTztNv-gkHSd2chqAc4xOBK5Ti6nPXDtE',\n    },\n  };\n  const response = await axios.request(options);\n  return response.data.results;\n}\n\nasync function trendingFilms_DAY() {\n  const options = {\n    method: 'GET',\n    url: 'https://api.themoviedb.org/3/trending/all/day',\n    params: { language: 'en-US' },\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwZmE1ZDU3ODY5YzBmYzQ2YWI2YjI3MDJhZDllNjZmZSIsInN1YiI6IjY0NzhjNTUwMGUyOWEyMDExNmFiOGIwNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.6ciIvtOhfPeTztNv-gkHSd2chqAc4xOBK5Ti6nPXDtE',\n    },\n  };\n\n  const response = await axios.request(options);\n  return response.data;\n}\n\nasync function genre_ID() {\n  const options = {\n    method: 'GET',\n    url: 'https://api.themoviedb.org/3/genre/movie/list',\n    params: { language: 'en' },\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIwZmE1ZDU3ODY5YzBmYzQ2YWI2YjI3MDJhZDllNjZmZSIsInN1YiI6IjY0NzhjNTUwMGUyOWEyMDExNmFiOGIwNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.6ciIvtOhfPeTztNv-gkHSd2chqAc4xOBK5Ti6nPXDtE',\n    },\n  };\n\n  const response = await axios.request(options);\n  return response.data.genres;\n}\n\n// FUNCTION=====================================================\n\nfunction renderMoreDeteils(\n  id,\n  poster_path,\n  title,\n  name,\n  vote_average,\n  popularity,\n  overview,\n  vote_count,\n  genres\n) {\n  const inStorage = favoriteArr.some(film => film.id === id);\n  const buttonText = inStorage ? 'Remove from my library' : 'Add to my library';\n  return (heroMoreDeteils.innerHTML = `\n    <p  class=\"hero-more-svg\">X</p>\n  <div class=\"hero-more-poster\"  style=\"background:url('https://image.tmdb.org/t/p/w300${poster_path}');  \n  background-repeat: no-repeat;\n   background-position: center;\n   background-size: cover;\n\n  \">\n  </div>\n   </div>\n\n   <div class=\"hero-more-deteils-info js_add_id\" data-id=\"${id}\">\n  <h2 class=\"hero-more-title\">${title || name}</h2>\n  <div class=\"hero-more-container\">\n    <div class=\"hero-more-wrapper\">\n      <p class=\"hero-more-specification\">Vote / Votes</p>\n      <p class=\"hero-more-specification\">Popularity</p>\n      <p class=\"hero-more-specification\">Genre</p>\n    </div>\n    <div class=\"hero-more-box\">\n      <p class=\"hero-more-stats\"> <span class=\"hero-more-accent\">${vote_average.toFixed(\n        1\n      )}</span>\n        <span class=\"hero-more-slash\">/</span> <span class=\"hero-more-accent\">${Math.round(\n          vote_count\n        )}</span>\n      </p>\n      <p class=\"hero-more-stats\">${popularity.toFixed(1)}</p>\n      <p class=\"hero-more-stats\">${genres}</p>\n    </div>\n  </div>\n\n  <p class=\"hero-more-about\">About</p>\n\n  <p class=\"hero-more-descriptions\">${overview}</p>\n      <button class=\"hero-more_deteils-add_btn js_add_collection\">${buttonText}</button>\n\n  </div>\n\n  `);\n}\n\ntrendingFilms_DAY()\n  .then(data => {\n    const {\n      title = '',\n      name = '',\n      overview = '',\n      backdrop_path = '',\n      id,\n      vote_average,\n      popularity,\n      poster_path,\n      vote_count,\n      genre_ids,\n    } = data.results[getRandomNumber(0, 20)];\n\n    genre_ID().then(data => {\n      const genresArr = [];\n\n      data.map(e => {\n        genre_ids.map(el => {\n          if (el === e.id) {\n            genresArr.push(e.name);\n          }\n        });\n      });\n      renderMoreDeteils(\n        id,\n        poster_path,\n        title,\n        name,\n        vote_average,\n        popularity,\n        overview,\n        vote_count,\n        genresArr.join(' ')\n      );\n      const heroMoreDeteils_X = document.querySelector('.hero-more-svg');\n      heroMoreDeteils_X.addEventListener('click', onCloseDetails);\n      const moreВeteils_addBtn = document.querySelector('.js_add_collection');\n\n      moreВeteils_addBtn.addEventListener('click', onClickFilm);\n    });\n\n    trailer(id)\n      .then(data => {\n        if (data.length === 0) {\n          return;\n        }\n        onYouTubeIframeAPIReady(data[getRandomNumber(0, data.length)].key);\n        closeModal.classList.add('inother-position');\n      })\n      .catch(e => {\n        closeModal.classList.remove('inother-position');\n      });\n\n    heroSection.style = `\n   background: linear-gradient(86.47deg, #111111 33.63%, rgba(17, 17, 17, 0) 76.86%),url('https://image.tmdb.org/t/p/original${backdrop_path}');\n   background-repeat: no-repeat;\n   background-position: center;\n   background-size: cover;\n    `;\n\n    renderStars(heroRating, vote_average);\n\n    heroTitle.innerHTML = `${title || name}`;\n    heroText.innerHTML = `${overview.slice(0, 90)}...`;\n\n    if (screenWidth >= 768 && screenWidth < 1280) {\n      heroRating.style.padding = '17px 0 ';\n      heroTitle.style.paddingTop = '36px';\n      heroText.innerHTML = `${overview.slice(0, 200)}...`;\n    }\n    if (screenWidth >= 1280) {\n      heroRating.style.padding = '17px 0 ';\n      heroTitle.style.paddingTop = '118px';\n      heroText.innerHTML = `${overview.slice(0, 250)}...`;\n    }\n\n    heroTrailerBTN.textContent = 'Watch trailer';\n    heroMoreBTN.classList.remove('ishidden');\n    heroTrailerBTN.classList.remove('is-hidden');\n\n    if (heroTrailerBTN.textContent === 'Watch trailer') {\n      heroTrailerBTN.addEventListener('click', onOpenModalTrailer);\n    }\n\n    closeModal.addEventListener('click', onCloseModalTrailer);\n\n    heroMoreDeteils_BTN.addEventListener('click', onOpenDetails);\n  })\n\n  .catch(e => {\n    heroTrailerBTN.textContent = 'Get Started';\n    heroMoreBTN.classList.add('ishidden');\n    heroRating.classList.add('ishidden');\n  });\n"],"names":["$2shzp","parcelRequire","$4ac8f69bad660a77$var$player","$4ac8f69bad660a77$var$heroSection","document","querySelector","$4ac8f69bad660a77$var$heroTitle","$4ac8f69bad660a77$var$heroText","$4ac8f69bad660a77$var$heroTrailerBTN","$4ac8f69bad660a77$var$heroMoreBTN","$4ac8f69bad660a77$var$heroRating","$4ac8f69bad660a77$var$trailerModal","$4ac8f69bad660a77$var$closeModal","$4ac8f69bad660a77$var$heroMoreDeteils","$4ac8f69bad660a77$var$heroMoreDeteils_BTN","$4ac8f69bad660a77$var$modalOverlay","$4ac8f69bad660a77$var$screenWidth","documentElement","clientWidth","$4ac8f69bad660a77$var$handleKeyDown","event","key","classList","add","remove","body","removeEventListener","contains","pauseVideo","$4ac8f69bad660a77$var$onCloseTouchBody","target","$4ac8f69bad660a77$var$onOpenDetails","addEventListener","$4ac8f69bad660a77$var$onCloseBackdrop","e","$4ac8f69bad660a77$var$onCloseDetails","$4ac8f69bad660a77$var$onOpenModalTrailer","preventDefault","$4ac8f69bad660a77$var$onCloseModalTrailer","textContent","slice","async","default","request","method","url","params","language","headers","accept","Authorization","data","$4ac8f69bad660a77$var$trendingFilms_DAY","then","data1","title","name","overview","backdrop_path","id","vote_average","popularity","poster_path","vote_count","genre_ids","results","$9Wu9X","getRandomNumber","genres","$4ac8f69bad660a77$var$genre_ID","genresArr","map","el","push","buttonText","$g7c2E","favoriteArr","some","film","innerHTML","toFixed","Math","round","$4ac8f69bad660a77$var$renderMoreDeteils","join","onClickFilm","options","$4ac8f69bad660a77$var$trailer","length","YT","Player","height","width","videoId","$4ac8f69bad660a77$var$onYouTubeIframeAPIReady","catch","style","renderStars","padding","paddingTop"],"version":3,"file":"hero.3923d2e1.js.map"}