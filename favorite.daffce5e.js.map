{"mappings":"oZAAA,IAAAA,EAAAC,EAAA,S,0BAMMC,EAAOC,SAASC,cAAc,qBAC9BC,EAAiBF,SAASC,cAAc,oBACxCE,EAAeH,SAASC,cAAc,kBAEtCG,EAAe,IAAI,EAAAC,EAAAC,cACzBF,EAAaG,8BACb,IAAMC,EAAWJ,EAAaK,QAUvB,SAASC,EAAWC,GACzB,IAAMC,EAASD,EACZE,KACC,SAAAC,G,IACEC,EAAWD,EAAXC,YACAC,EAAaF,EAAbE,cACAC,EAAcH,EAAdG,eACAC,EAAMJ,EAANI,OACAC,EAAYL,EAAZK,aACAC,EAAYN,EAAZM,aACAC,EAAcP,EAAdO,eACAC,EAAER,EAAFQ,GAEIC,EAAMR,EACN,sCAAkDS,OAAZT,GACtC,4DACEU,EA6Bd,SAAmBN,EAAcE,GAO/B,YAL0B,IAAjBF,EACHA,EAAaO,MAAM,KAAK,QACE,IAAnBL,EACPA,EAAeK,MAAM,KAAK,GAC1B,E,CAnCaC,CAAUR,EAAcE,GACjCO,EAsCZ,SAAyBC,GACvB,IAAIC,EAAiB,QACG,IAAbD,IACTC,EAAiBD,EAAShB,KAAI,SAAAe,G,OAASA,EAAMG,I,KAE3CD,EAAeE,OAAS,IAC1BF,EAAiBA,EAAeG,MAAM,EAAG,IAE3C,OAA8B,IAA1BH,EAAeE,OACV,OAEFF,EAAeI,KAAK,K,CAjDTC,CAAgBjB,GAC5B,MAAO,yEACoBM,OADoDF,EAAG,0CAEhFE,OADyBD,EAAI,WAKIC,OAJjCR,GAAiBC,EAClB,yKAIkCO,OADAR,GAAiBC,EAAe,mDACrBO,OAAXI,EAAM,OAIjCJ,OAJsCC,EAAK,qJAKJD,OADvCJ,EAAe,EAChB,0CAGLI,QAH6C,EAAAY,EAAAC,OAC7CjB,EAAe,EACf,IACA,yG,IAQLc,KAAK,IACRnC,EAAKuC,UAAY1B,C,EAlDnB,EAAAf,EAAA0C,aACGC,MAAK,SAAAC,GACJA,EAAIC,SAAQ,SAAA5B,G,IAAGQ,EAAER,EAAFQ,GAAIS,EAAIjB,EAAJiB,KACjBY,WAAWrB,GAAMS,C,OAGpBa,MAAMC,OAuELC,OAAOC,SAASC,KAAKC,SAAS,qBAC5BzC,EAASwB,OAAS,GACpB9B,EAAegD,UAAUC,OAAO,kBAChCzC,EAAWF,IAEXL,EAAa+C,UAAUC,OAAO,kB,sCChGlC,SAASC,EAAMC,EAAQC,GACrB,OAAOC,KAAKlB,MAAMgB,EAASC,GAAUA,C,qJAGvC,IAAME,EAAkB,SAACC,EAAKC,GAC5B,OAAOH,KAAKI,MAAMJ,KAAKK,UAAYF,EAAMD,EAAM,IAAMA,C,EAGvD,SAASI,EAAYC,EAASC,GAC5B,OAAQD,EAAQxB,UAAY,kDAGed,OADvCuC,EAAS,EACV,0CAEDvC,OAFyC+B,KAAKlB,MAC9C0B,EAAS,GACT,uB,0FCdJ,IAAAC,EAAAlE,EAAA,S,aAAOmE,ECAJ,W,sBDAU3D,I,aAET4D,KAAKzD,QAAU,GACfyD,KAAK3D,6B,iBAGP4D,IAAA,8B,MAAA,WACE,IAAMC,EAAcC,aAAaC,QAAQ,YACzCJ,KAAKzD,QAAU2D,EAAcG,KAAKC,MAAMJ,GAAe,E,IAGzDD,IAAA,4B,MAAA,WACEE,aAAaI,QAAQ,WAAYF,KAAKG,UAAUR,KAAKzD,S,IAGvD0D,IAAA,kB,MAAA,SAAgB7C,GACd,OAAO4C,KAAKzD,QAAQkE,MAAK,SAAAC,G,OAAeA,EAAYtD,IAAMA,C,OAG5D6C,IAAA,mB,MAAA,SAAiBU,GACfX,KAAKzD,QAAQqE,KAAKD,GAClBX,KAAKa,2B,IAGPZ,IAAA,wB,MAAA,SAAsBU,GACpB,IAAMG,EAAQd,KAAKzD,QAAQwE,WACzB,SAAAL,G,OAAeA,EAAYtD,KAAOuD,EAAKvD,E,KAE3B,IAAV0D,IACFd,KAAKzD,QAAQyE,OAAOF,EAAO,GAC3Bd,KAAKa,4B,OC9BR,E","sources":["src/javascript/favorite.js","src/javascript/utils.js","src/javascript/movie-library.js","<<jsx-config-pragma.js>>"],"sourcesContent":["import { getGenres } from './api';\nimport { round } from './utils';\nimport { MovieLibrary } from './movie-library';\n\nconst KEY_FAVORITE = 'favorite';\n\nconst list = document.querySelector('.search_film_list');\nconst librarySection = document.querySelector('.library-section');\nconst errorSectoin = document.querySelector('.error-section');\n\nconst movieLibrary = new MovieLibrary();\nmovieLibrary.loadLibraryFromLocalStorage();\nconst favorite = movieLibrary.library;\n\ngetGenres()\n  .then(res => {\n    res.forEach(({ id, name }) => {\n      categories[id] = name;\n    });\n  })\n  .catch(Error);\n\nexport function markupFilm(favorite) {\n  const markup = favorite\n    .map(\n      ({\n        poster_path,\n        original_name,\n        original_title,\n        genres,\n        release_date,\n        vote_average,\n        first_air_date,\n        id,\n      }) => {\n        let url = poster_path\n          ? `https://image.tmdb.org/t/p/original${poster_path}`\n          : 'https://www.tgv.com.my/assets/images/404/movie-poster.jpg';\n        const year = yearsFilm(release_date, first_air_date);\n        let genre = categoriesFilms(genres);\n        return `<li class=\"search_film_img_wrap movie-image list_item\" data-film-id='${id}'>\n        <img loading=\"lazy\" src=\"${url}\" alt=\"${\n          original_name || original_title\n        }\" width=\"395\" height=\"574\" class=\"search_film_img\"/>\n        <div class=\"wrap\">\n          <div class=\"search_film_wrap\">\n            <p class=\"search_film_title\">${original_name || original_title}</p>\n            <p class=\"search_film_genre\">${genre} | ${year}</p> \n            <div class=\"stars\">\n            <div class='film_rating-wrapper'>\n              <div class='film_rating' style='--rating: ${\n                vote_average / 2\n              };' aria-label='Rating of this film is ${round(\n          vote_average / 2,\n          10\n        )} out of 5.'></div>\n            </div>\n         </div>\n          </div>\n        </div>\n      </li>`;\n      }\n    )\n    .join('');\n  list.innerHTML = markup;\n}\n\nfunction yearsFilm(release_date, first_air_date) {\n  const year =\n    typeof release_date !== 'undefined'\n      ? release_date.split('-')[0]\n      : typeof first_air_date !== 'undefined'\n      ? first_air_date.split('-')[0]\n      : '';\n  return year;\n}\n\nfunction categoriesFilms(genreIds) {\n  let categoriesFilm = [];\n  if (typeof genreIds !== 'undefined') {\n    categoriesFilm = genreIds.map(genre => genre.name);\n  }\n  if (categoriesFilm.length > 2) {\n    categoriesFilm = categoriesFilm.slice(0, 2);\n  }\n  if (categoriesFilm.length === 0) {\n    return 'Film';\n  }\n  return categoriesFilm.join(', ');\n}\n\nif (window.location.href.includes('my-library.html')) {\n  if (favorite.length > 0) {\n    librarySection.classList.remove('display-hidden');\n    markupFilm(favorite);\n  } else {\n    errorSectoin.classList.remove('display-hidden');\n  }\n}\n","function round(number, digits) {\n  return Math.round(number * digits) / digits;\n}\n\nconst getRandomNumber = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nfunction renderStars(element, rating) {\n  return (element.innerHTML = `\n    <div class=\"film_rating\" style=\"--rating:${\n      rating / 2\n    };\" aria-label=\"Rating of this film is ${Math.round(\n    rating / 2\n  )} out of 5.\"></div>\n`);\n}\n\nexport { round, getRandomNumber, renderStars };\n","export class MovieLibrary {\n  constructor() {\n    this.library = [];\n    this.loadLibraryFromLocalStorage();\n  }\n\n  loadLibraryFromLocalStorage() {\n    const libraryJSON = localStorage.getItem('favorite');\n    this.library = libraryJSON ? JSON.parse(libraryJSON) : [];\n  }\n\n  saveLibraryToLocalStorage() {\n    localStorage.setItem('favorite', JSON.stringify(this.library));\n  }\n\n  isFilmInLibrary(id) {\n    return this.library.some(libraryFilm => libraryFilm.id == id);\n  }\n\n  addFilmToLibrary(film) {\n    this.library.push(film);\n    this.saveLibraryToLocalStorage();\n  }\n\n  removeFilmFromLibrary(film) {\n    const index = this.library.findIndex(\n      libraryFilm => libraryFilm.id === film.id\n    );\n    if (index !== -1) {\n      this.library.splice(index, 1);\n      this.saveLibraryToLocalStorage();\n    }\n  }\n}\n",null],"names":["$8LhE9","parcelRequire","$9864e74719ae02e5$var$list","document","querySelector","$9864e74719ae02e5$var$librarySection","$9864e74719ae02e5$var$errorSectoin","$9864e74719ae02e5$var$movieLibrary","$l2qkJ","MovieLibrary","loadLibraryFromLocalStorage","$9864e74719ae02e5$var$favorite","library","$9864e74719ae02e5$export$f277672e8b84b234","favorite1","markup","map","param","poster_path","original_name","original_title","genres","release_date","vote_average","first_air_date","id","url","concat","year","split","$9864e74719ae02e5$var$yearsFilm","genre","genreIds","categoriesFilm","name","length","slice","join","$9864e74719ae02e5$var$categoriesFilms","$3RRSf","round","innerHTML","getGenres","then","res","forEach","categories","catch","Error","window","location","href","includes","classList","remove","$2d101c92898a7d81$export$2077e0241d6afd3c","number","digits","Math","$2d101c92898a7d81$export$eab19c48dcb6310d","min","max","floor","random","$2d101c92898a7d81$export$6b958f153b36132a","element","rating","$8MBJY","$f50e3620c4266279$export$a77202e529bf9901","this","key","libraryJSON","localStorage","getItem","JSON","parse","setItem","stringify","some","libraryFilm","film","push","saveLibraryToLocalStorage","index","findIndex","splice"],"version":3,"file":"favorite.daffce5e.js.map"}