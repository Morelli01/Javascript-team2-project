{"mappings":"mWAAA,IAAAA,EAAAC,EAAA,S,iEAKCC,EAAAF,EAAA,CAAAE,EAAAC,GAAAC,MAAA,SAAAC,I,IAEOC,EAEAC,EAGAC,E,sEANN,EAAAC,EAAAC,gBACMJ,EAAmBK,SAASC,cAAc,uBAC3B,C,iEACF,EAAAC,EAAAC,wB,cAAbP,EAAIQ,EAAAC,KACVC,QAAQC,IAAI,YAAaX,G,WAEJ,EAAAM,EAAAM,a,QAAfX,EAAMO,EAAAC,KAIRV,IACFA,EAAiBc,UAAYC,EAAad,EAAMC,I,2CAZnD,IAeD,EAAAC,EAAAa,eACA,IAAMC,EAAmBZ,SAASC,cAAc,uBAC1CS,EAAe,SAACG,EAAMhB,GAC1B,IACMiB,GADUC,OAAOC,YAAc,IAAM,kDAAoD,oDACpEH,EAAKI,YAC1BC,EAAWL,EAAKK,SAChBC,EAAQN,EAAKO,eAGbC,EAAc,IAAIC,KAAKT,EAAKU,cAC5BC,EAAMH,EAAYI,UAAUC,WAAWC,SAAS,EAAG,KACnDC,GAASP,EAAYQ,WAAa,GAAGH,WAAWC,SAAS,EAAG,KAC5DG,EAAOT,EAAYU,cAEnBC,EAAuB,GAAUC,OAAPT,EAAI,KAAYS,OAATL,EAAM,KAAQK,OAALH,GAE1CI,EAAcrB,EAAKsB,aACnBC,EAAYvB,EAAKwB,WACjBC,EAAazB,EAAKyB,WAClBC,EAAK1B,EAAK0B,GAEVC,EADYC,EAAAC,YAAYC,MAAK,SAAA/C,G,OAAQA,EAAK2C,KAAOA,C,IACxB,yBAA2B,oBACpDK,EAAa/C,EAChBgD,QAAO,SAACC,G,OAAUjC,EAAKkC,UAAUC,MAAM,EAAG,GAAGC,SAASH,EAAMP,G,IAC5DW,KAAI,SAAAC,G,OAAOA,EAAJC,I,IACPC,KAAK,MACR,MAAO,sBAGkCpB,OAFxBM,EAAG,sFAMwBN,OAJHnB,EAAS,iJASmBmB,OALzBd,EAAM,0PAUTc,OAL4BD,EAAqB,2OAOjDC,OAFAC,EAAY,6GAOMD,OALlBG,EAAU,gOASQH,QAJA,EAAAqB,EAAAC,OAAMjB,EAAY,IAAI,sMAS/BL,OALSW,EAAW,kMAQNX,OAHdf,EAAS,oIAGYe,OAAPM,EAAG,MAAeN,OAAXO,EAAW,yD,EAOpF5B,EAAiB4C,iBAAiB,QAASf,EAAAgB,Y,sCCzF3C,SAASC,EAAMC,EAAQC,GACrB,OAAOC,KAAKN,MAAMI,EAASC,GAAUA,C,qJAGvC,IAAME,EAAkB,SAACC,EAAKC,GAC5B,OAAOH,KAAKI,MAAMJ,KAAKK,UAAYF,EAAMD,EAAM,IAAMA,C,EAGvD,SAASI,EAAYC,EAASC,GAC5B,OAAQD,EAAQ3D,UAAY,kDAGewB,OADvCoC,EAAS,EACV,0CAEDpC,OAFyC4B,KAAKN,MAC9Cc,EAAS,GACT,uB","sources":["src/javascript/film-month.js","src/javascript/utils.js"],"sourcesContent":["import { getGenres, getRandomFilmOfMonth } from './api';\nimport { spinnerStart, spinnerStop } from './spin';\nimport { round } from './utils';\nimport { onClickFilm, favoriteArr } from './local_storage';\n\n(async () => {\n  spinnerStart();\n  const filmMonthWrapper = document.querySelector('.film-month_wrapper');\n  if (!filmMonthWrapper) return;\n  const film = await getRandomFilmOfMonth();\n  console.log('filmMonth', film);\n\n  const genres = await getGenres();\n  // spinnerStop()\n\n\n  if (filmMonthWrapper) {\n    filmMonthWrapper.innerHTML = createMarkup(film, genres);\n  }\n})();\nspinnerStop();\nconst filmMonthWrapper = document.querySelector('.film-month_wrapper');\nconst createMarkup = (film, genres) => {\n  const baseUrl = window.innerWidth <= 600 ? 'https://image.tmdb.org/t/p/w600_and_h900_bestv2' : 'https://image.tmdb.org/t/p/w1066_and_h600_bestv2';\n  const imageSrc = baseUrl + film.poster_path;\n  const overview = film.overview;\n  const title = film.original_title;\n\n\n  const releaseDate = new Date(film.release_date);\n  const day = releaseDate.getDate().toString().padStart(2, '0');\n  const month = (releaseDate.getMonth() + 1).toString().padStart(2, '0');\n  const year = releaseDate.getFullYear();\n\n  const formattedReleaseDate = `${day}.${month}.${year}`;\n\n  const voteAverage = film.vote_average;\n  const voteCount = film.vote_count;\n  const popularity = film.popularity;\n  const id = film.id;\n  const inStorage = favoriteArr.some(film => film.id === id);\n  const buttonText = inStorage ? 'Remove from my library' : 'Add to my library';\n  const filmGenres = genres\n    .filter((genre) => film.genre_ids.slice(0, 2).includes(genre.id))\n    .map(({ name }) => name)\n    .join(', ');\n  return `\n    <li data-id='${id}>\n      <div class='film-month_image'>\n        <img class='film-month_img' src='${imageSrc}' alt='' loading=\"lazy\">\n      </div>\n      <div class='film-month_content'>\n        <div>\n          <h3 class='film-month_info-title'>${title}</h3>\n        </div>\n        <div class='film-month_info'>\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Release date</span>\n            <span class='film-month_info-value film-month_info-year'>${formattedReleaseDate}</span>\n          </div>\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Vote/Votes</span>\n            <span class='film-month_info-value'>\n              <span class='value-number'>${voteAverage}</span>\n               <span class='value-separator'>/</span>\n              <span class='value-number'>${voteCount}</span>\n            </span>\n          </div>\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Popularity</span>\n            <span class='film-month_info-value span-value'>${round(popularity, 10)}</span>\n          </div>\n          <div class='film-month_info-item'>\n            <span class='film-month_info-label'>Genre</span>\n            <span class='film-month_info-value span-value'>${filmGenres}</span>\n          </div>\n        </div>\n        <div class='film-month_about'>\n          <h4 class='film-month_about-title'>About</h4>\n          <p class='film-month_about-description'>${overview}</p>\n        </div>\n        <div class='film-month_button'>\n          <button class='button film-month_button-add' data-id=\"${id}\">${buttonText}</button>\n        </div>\n      </div>\n    </li>\n  `;\n};\n\nfilmMonthWrapper.addEventListener('click', onClickFilm);","function round(number, digits) {\n  return Math.round(number * digits) / digits;\n}\n\nconst getRandomNumber = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nfunction renderStars(element, rating) {\n  return (element.innerHTML = `\n    <div class=\"film_rating\" style=\"--rating:${\n      rating / 2\n    };\" aria-label=\"Rating of this film is ${Math.round(\n    rating / 2\n  )} out of 5.\"></div>\n`);\n}\n\nexport { round, getRandomNumber, renderStars };\n"],"names":["$bpxeT","parcelRequire","$parcel$interopDefault","$2TvXO","mark","_callee","filmMonthWrapper1","film","genres","$dBKQr","spinnerStart","document","querySelector","$8LhE9","getRandomFilmOfMonth","_ctx","sent","console","log","getGenres","innerHTML","$6d0d55a67575c206$var$createMarkup","spinnerStop","$6d0d55a67575c206$var$filmMonthWrapper","film1","imageSrc","window","innerWidth","poster_path","overview","title","original_title","releaseDate","Date","release_date","day","getDate","toString","padStart","month","getMonth","year","getFullYear","formattedReleaseDate","concat","voteAverage","vote_average","voteCount","vote_count","popularity","id","buttonText","$cLNaR","favoriteArr","some","filmGenres","filter","genre","genre_ids","slice","includes","map","param","name","join","$3RRSf","round","addEventListener","onClickFilm","$2d101c92898a7d81$export$2077e0241d6afd3c","number","digits","Math","$2d101c92898a7d81$export$eab19c48dcb6310d","min","max","floor","random","$2d101c92898a7d81$export$6b958f153b36132a","element","rating"],"version":3,"file":"film-month.95b17c77.js.map"}