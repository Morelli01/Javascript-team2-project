{"mappings":"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","sources":["src/javascript/film-catalog.js","src/javascript/utils.js"],"sourcesContent":["'use strict';\nimport { getFilms, getGenres, getCategoriesQuery } from './api';\nimport { createPagination } from './pagination';\nimport { round } from './utils';\n\n\nconst refs = {\n  ulEl: document.querySelector('.search_film_list'),\n  inputEl: document.querySelector('.search_film_input'),\n  divPagination: document.getElementById('pagination'),\n  form: document.getElementById('form'),\n  btnReset: document.querySelector('.btn_reset'),\n  toTop: document.querySelector('.to_top'),\n  falseResultMessage: document.querySelector('.cards__message'),\n};\n\nlet categories = {};\nlet currentPage = 1;\nlet searchQuery = '';\n\ngetGenres()\n  .then(res => {\n    res.forEach(({ id, name }) => {\n      categories[id] = name;\n    });\n    return getFilms(currentPage);\n  })\n  .then(categoriesData => {\n    markupFilm(categoriesData.results);\n    paginationTrendWeek(categoriesData);\n  })\n  .catch(Error);\n\nfunction markupFilm(data) {\n  const markup = data\n    .map(\n      ({\n        id,\n        poster_path,\n        original_title,\n        genre_ids,\n        release_date,\n        vote_average,\n        first_air_date,\n        original_name,\n      }) => {\n        let url = poster_path\n          ? `https://image.tmdb.org/t/p/original${poster_path}`\n          : 'https://www.tgv.com.my/assets/images/404/movie-poster.jpg';\n        const year = yearsFilm(release_date, first_air_date);\n        let genre = categoriesFilms(genre_ids);\n        return `<li class=\"search_film_img_wrap movie-image list_item\" data-film-id='${id}'>\n        <img loading=\"lazy\" src=\"${url}\" alt=\"${\n          original_name || original_title\n        }\" width=\"395\" height=\"574\" class=\"search_film_img\"/>\n        <div class=\"wrap\">\n          <div class=\"search_film_wrap\">\n            <p class=\"search_film_title\">${original_name || original_title}</p>\n            <p class=\"search_film_genre\">${genre} | ${year}</p> \n            <div class=\"stars\">\n            <div class='film_rating-wrapper'>\n              <div class='film_rating' style='--rating: ${\n                vote_average / 2\n              };' aria-label='Rating of this film is ${round(\n          vote_average / 2,\n          10\n        )} out of 5.'></div>\n            </div>\n         </div>\n          </div>\n        </div>\n      </li>`;\n      }\n    )\n    .join('');\n  refs.ulEl.innerHTML = markup;\n}\n\nfunction categoriesFilms(genreIds) {\n  let categoriesFilm = [];\n  if (typeof genreIds !== 'undefined') {\n    categoriesFilm = genreIds\n      .filter(genre => typeof genre !== 'undefined')\n      .map(genre => {\n        if (!categories[genre]) {\n          return 'Film';\n        }\n        return categories[genre];\n      });\n  }\n  if (categoriesFilm.length > 2) {\n    categoriesFilm = categoriesFilm.slice(0, 2);\n  }\n  if (categoriesFilm.length === 0) {\n    return 'Film';\n  }\n  return categoriesFilm.join(', ');\n}\n\nfunction yearsFilm(release_date, first_air_date) {\n  const year =\n    typeof release_date !== 'undefined'\n      ? release_date.split('-')[0]\n      : typeof first_air_date !== 'undefined'\n      ? first_air_date.split('-')[0]\n      : '';\n  return year;\n}\n\nrefs.form.addEventListener('submit', onSubmit);\n\nasync function onSubmit(ev) {\n  ev.preventDefault();\n  currentPage = 1;\n  searchQuery = ev.currentTarget.elements.film_name.value.trim();\n  refs.divPagination.classList.add('display-hidden');\n  refs.falseResultMessage.classList.add('display-hidden');\n\n  if (searchQuery.length >= 1) {\n    refs.btnReset.classList.remove('is-hidden');\n  }\n\n  const response = await getCategoriesQuery(searchQuery, currentPage);\n  refs.ulEl.innerHTML = '';\n\n  markupFilm(response.results);\n  paginationSearchFilms(response);\n  addFalseResultText(response);\n}\n\nfunction paginationTrendWeek(response) {\n  if (response.total_results > 20) {\n    refs.divPagination.classList.remove('display-hidden');\n\n    const pagination = createPagination(\n      response.total_results,\n      response.total_pages\n    );\n\n    pagination.on('afterMove', event => {\n      currentPage = event.page;\n      getFilms(currentPage)\n        .then(data => {\n          markupFilm(data.results);\n          window.scrollTo({\n            top: 450,\n            behavior: 'smooth',\n          });\n        })\n        .catch(error => {\n          console.error('Error:', error);\n        });\n    });\n  }\n}\n\nfunction paginationSearchFilms(response) {\n  if (response.total_results > 20) {\n    refs.divPagination.classList.remove('display-hidden');\n\n    const pagination = createPagination(\n      response.total_results,\n      response.total_pages\n    );\n\n    pagination.on('afterMove', event => {\n      currentPage = event.page;\n      getCategoriesQuery(searchQuery, currentPage)\n        .then(data => {\n          markupFilm(data.results);\n          window.scrollTo({\n            top: 450,\n            behavior: 'smooth',\n          });\n        })\n        .catch(error => {\n          console.error('Error:', error);\n        });\n    });\n  }\n}\n\nfunction addFalseResultText(response) {\n  if (response.total_results === 0) {\n    refs.falseResultMessage.classList.remove('display-hidden');\n  }\n}\n\nrefs.btnReset.addEventListener('click', () => {\n  refs.btnReset.classList.add('is-hidden');\n  refs.form.reset();\n});\n\nfunction Error(err) {\n  console.log(err);\n}\n","function round(number, digits) {\n  return Math.round(number * digits) / digits;\n}\n\nconst getRandomNumber = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nfunction renderStars(element, rating) {\n  return (element.innerHTML = `\n    <div class=\"film_rating\" style=\"--rating:${\n      rating / 2\n    };\" aria-label=\"Rating of this film is ${Math.round(\n    rating / 2\n  )} out of 5.\"></div>\n`);\n}\n\nexport { round, getRandomNumber, renderStars };\n"],"names":["$bpxeT","parcelRequire","$5b0cf1a09c8c8e4d$var$refs","ulEl","document","querySelector","inputEl","divPagination","getElementById","form","btnReset","toTop","falseResultMessage","$5b0cf1a09c8c8e4d$var$categories","$5b0cf1a09c8c8e4d$var$currentPage","$5b0cf1a09c8c8e4d$var$searchQuery","$5b0cf1a09c8c8e4d$var$markupFilm","data","markup","map","param","id","poster_path","original_title","genre_ids","release_date","vote_average","first_air_date","original_name","url","concat","year","split","$5b0cf1a09c8c8e4d$var$yearsFilm","genre","genreIds","categoriesFilm","filter","length","slice","join","$5b0cf1a09c8c8e4d$var$categoriesFilms","$3RRSf","round","innerHTML","$5b0cf1a09c8c8e4d$var$_onSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","ev","response","preventDefault","currentTarget","elements","film_name","value","trim","classList","add","remove","$8LhE9","getCategoriesQuery","_ctx","sent","results","$5b0cf1a09c8c8e4d$var$paginationSearchFilms","$5b0cf1a09c8c8e4d$var$addFalseResultText","apply","this","arguments","total_results","$krKMH","createPagination","total_pages","on","event","page","then","window","scrollTo","top","behavior","catch","error","console","getGenres","res","forEach","name","getFilms","categoriesData","$5b0cf1a09c8c8e4d$var$paginationTrendWeek","err","log","addEventListener","reset","$2d101c92898a7d81$export$2077e0241d6afd3c","number","digits","Math","$2d101c92898a7d81$export$eab19c48dcb6310d","min","max","floor","random","$2d101c92898a7d81$export$6b958f153b36132a","element","rating"],"version":3,"file":"film-catalog.9267a944.js.map"}