{"mappings":"ucAAA,IAI2BA,EAJ3BC,EAAAC,EAAA,S,0BAEMC,EAAe,WAERC,EAA4D,QAA9CJ,EAAAK,KAAKC,MAAMC,aAAaC,QAAQL,WAAc,IAA9CH,IAAkD,G,SAEvDS,EAAYC,G,OAAZC,EAAWC,MAAAC,KAAAC,U,UAAXH,I,OAAAA,EAAfI,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,EAA2BR,G,IAC5BS,EACEC,EAGIC,EAYEC,E,qEAhBRH,EAAS,OACPC,EAAMV,EAAGa,OAAOC,QAAQ,uBAEvB,C,uBACCH,EAASD,EAAII,QAAQ,cAAcC,QAAjCC,G,SACOC,EAASC,OAAOP,I,YAA/BF,EAAMU,EAAAC,MACI,C,oBACU1B,EAAY2B,MAAK,SAAAC,G,OAAKA,EAAFN,KAAgBP,C,IACzC,C,gBACXf,EAAY6B,OACV7B,EAAY8B,WAAU,SAAAC,G,OAAQA,EAAKT,KAAOP,C,IAC1C,GAEFZ,aAAa6B,QAAQjC,EAAcE,KAAKgC,UAAUjC,IAClDgB,EAAIkB,YAAc,oB,0CAEC,EAAAC,EAAAC,iBAAgBrB,G,QAA7BG,EAAIO,EAAAC,KACV1B,EAAYqC,KAAKnB,GACjBf,aAAa6B,QAAQjC,EAAcE,KAAKgC,UAAUjC,IAClDgB,EAAIkB,YAAc,yB,6CApBO1B,MAAAC,KAAAC,U,UA0BlBa,EAASjB,G,OAATgC,EAAQ9B,MAAAC,KAAAC,U,UAAR4B,I,OAAAA,EAAf3B,EAAAd,EAAA,CAAAc,EAAAC,GAAAC,MAAA,SAAAC,EAAwBR,G,IAChBiC,E,mFAAY,EAAAJ,EAAAC,iBAAgB9B,G,cAA5BiC,EAAGd,EAAAC,K,kBACFa,EAAIjB,KAAOhB,EAAKiC,EAAIjB,GAAK,M,4CAFXd,MAAAC,KAAAC,U","sources":["src/javascript/local_storage.js"],"sourcesContent":["import { getCategoriesId } from './api';\n\nconst KEY_FAVORITE = 'favorite';\n\nexport const favoriteArr = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\nexport async function onClickFilm(ev) {\n  let filmId = null;\n  const btn = ev.target.closest('.js_add_collection');\n\n  if (btn) {\n    const { id } = btn.closest('.js_add_id').dataset;\n    filmId = await findFilm(Number(id));\n    if (filmId) {\n      const inStorage = favoriteArr.some(({ id }) => id === filmId);\n      if (inStorage) {\n        favoriteArr.splice(\n          favoriteArr.findIndex(film => film.id === filmId),\n          1\n        );\n        localStorage.setItem(KEY_FAVORITE, JSON.stringify(favoriteArr));\n        btn.textContent = 'Add to my library';\n      } else {\n        const film = await getCategoriesId(filmId);\n        favoriteArr.push(film);\n        localStorage.setItem(KEY_FAVORITE, JSON.stringify(favoriteArr));\n        btn.textContent = 'Remove from my library';\n      }\n    }\n  }\n}\n\nasync function findFilm(ev) {\n  const res = await getCategoriesId(ev);\n  return res.id === ev ? res.id : null;\n}\n"],"names":["$94c004c7183ad428$var$ref","$bpxeT","parcelRequire","$94c004c7183ad428$var$KEY_FAVORITE","$94c004c7183ad428$export$f5cb82f0aad40ad6","JSON","parse","localStorage","getItem","$94c004c7183ad428$export$f2eec75123b53c71","ev","$94c004c7183ad428$var$_onClickFilm","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","filmId","btn","id1","film1","target","closest","dataset","id","$94c004c7183ad428$var$findFilm","Number","_ctx","sent","some","param","splice","findIndex","film","setItem","stringify","textContent","$8LhE9","getCategoriesId","push","$94c004c7183ad428$var$_findFilm","res"],"version":3,"file":"hero.de1a8cc9.js.map"}